# ğŸŒŠ Simulador de HidrÃ´metro AnalÃ³gico

Primeiro projeto desenvolvido para a disciplina **PadrÃµes de Projetos** do **IFPB** (Instituto Federal de EducaÃ§Ã£o, CiÃªncia e Tecnologia da ParaÃ­ba).

![Imagem do HidrÃ´metro](https://images.steamusercontent.com/ugc/12714535732358554828/71FDD39A8659C6186284B0902D98512A22611111/)

## ğŸ“‹ Sobre o Projeto

Sistema de simulaÃ§Ã£o de um hidrÃ´metro digital que replica o comportamento real de um medidor de Ã¡gua, incluindo:

- **MediÃ§Ã£o de volume** consumido
- **DetecÃ§Ã£o de ar** na tubulaÃ§Ã£o
- **SimulaÃ§Ã£o de falta d'Ã¡gua**
- **Monitoramento** de pressÃ£o e vazÃ£o de Ã¡gua
- **Interface grÃ¡fica** com imagem de hidrÃ´metro real
- **Display no console** para depuraÃ§Ã£o
- **GeraÃ§Ã£o automÃ¡tica de diretÃ³rio com capturas** numeradas de 01-99 a cada mÂ³
- **Regulagem manual** do parÃ¢metro de vazÃ£o de Ã¡gua em tempo real na janela do simulador

## ğŸ—ï¸ Diagrama de Classe (UML)

![Diagrama UML](https://www.plantuml.com/plantuml/png/jLZVRYEtzRxNK_3dc_Lcr_-HNri33QB8NiSBE-lQtaMB832EXaSoMmuvFUG8Qe9zZbvlUr4qztq2lLX93YMEXZDgkqM3OAqXFvu_Xn-_mvclZGMoTIdPWoXh2LpJqxU2aoxHadvwVtip6lqVnvbGoEul9u_ZxwvkBbaXmPZHg8BY3p17jgTfVeXBA2k9U-od4MEiWR1R4CeFnFzUbUvv7sXkpjc39Q7ct__myfmjjE01yt7qiT_gOQ7LJCotZK_2M4rGW6uvEHZV_-RzzOTtJvDttxsvlbfxOhzcUnmi75L04B8pXtPfzzAw1Vm8-XQMeeHpndKzbUWM7HyU7v_y_o-wCA4oM898KGgBOshDdsm1q5Ytt8e5Z2dpU9gWQtVZUTsDwVYNPsS9LH4Q0xfjvV3BRa0NQB4ed3NgvhTjIazXAgJWmF4DI0kPzvE4vg7-iHujjDIXv5-wG7CmB7DmgD4MMYYBj02fnxO6ANw4mYVeHYCq8UT8G1EehBFlg3NLMY8e1xDKOu_100NJtfvMoHDTsmpRVvaC5K24Sw2x3PNs4utN6190O_fZBHRwSecEnJe3lPgZ_P1Ov-PZH3q8eOOHDv5l0zEN6Tk6FGMk3StVDIpR6KKYsQ2HFduDW2zoUaMmvqmEJUJQ1RtkOPO72cKJJfYhDgtyV2HMPgjDgauYkoIDEcgPXBSjPuLMrkjoSrGchQU4uS9K4lvqpYwQ7sa6bINWRk5bywDjDv7RsqrFNV7nHSgahYqymvXCxOOmCxzXYaUbIoVOZPkj8omAeNFfo4Lc9wRKt155kPW3vJE7MLDGEz8Z7tTvpkx3tpHkYcVajKHoBIZ-v4u9YjfgUa1QY09xD2UH82fEojjJTLXq4eoQNbw0pX5GIL40JJGHDgSqPBZEBP4thOXdXDRKoumcI5jfSjW2ISn4uLCm1kPO1b1-genJebJsxG0p2ULeWaEwtUnfxjduWeGCk2Wqcbo9Ao2WVe7MiYxnKLkGEsNJrs2tRkw2T2gNGOIvtUPijt8Vmxz9JRQKegqdYvJF4ACjbfM-3aUjevu7jVHn9jrCWBnv9lyjAhy2xkqgQEgwlRklMPzMVCQk41gqQKFxAnGbiLsS5CsGrWrCxnRKl3hHz_xmefVvWVWNHy6a3jq9TV3YiPkm_tOlgyLs9tiB2YNqzxFdpUWvIuZ_h2zPKNfPVVH_qgWelQXysxB_JJsR8I6_zZC9A66ACemvsNvxuvzQdKXJ2O6vhfrYuOpADs6e3n8BbIFRnqKtP8qt2RwBGC5e19hDPJT1RiUFzzUJzpVZzclDwV7fsSd9gRjhd_rgBs7lnW-FuwVRoulhoRlBXxYWxwHsTsk_VujUinrapI_7JNs_0OEv7hVQMRW_pQ0OH55BR8PQpsux70sgPw0BuDfuQyBipq_vERiYg9v5OKul1jVSQMTNaCvMl6QDa0uTiODA6r60tc40nLB_Dcnoy_jtyJSNSs5rV2XqMP4eKSMHdaWjKYaKq8C5MvkkeYOfs2cnYHwPtOd-BqrFjDJKwRMxTZNT51v0BjPKwklEj9vyUtTvbTifmaaAznBWgV_cif1UsUv0A9I-UP6Mk179jtVWXfDhN8gfsDrVrfTnzjDdA4Voj65uDBVVVY58fV_ChV7HP-6bgrx3yTkpd2V_8_wbHlE2tQE4S5K8x3UZy3NfuE2hzelIEVExbgRQefHDPcqf0aQjeIyE3hQkJXxZ7bT_Bxkek1_3WDZZUm5zmTR6XH8N3SvdEMG5qLE3j80CEMZoXUDWXOglVbQ50CDmQP4KcD4M-F3mg_ulQCwCNFtCeFdMaRiD2mqLHoK8TKHeT4q5cYFV6XBigEdUJxDQSNrOgRct6ti9Q-O6JDyY5wk_hVw1vkdxJN_yuUYBmzzN6AnucM1H2inefBH5PdN5z8nvQWJAUPdMZ2F3M7_tV_Ekv4p_LGVCH6lYg82bzXKc6TScwBHMRZMQ4IhEl9VeYyJysNflsMLc4lEhW5P_QKhgZArB6JUYWNu0gGcDWtBoFWrkOCe_ur8OAwWnImAIaURZ4uFQQd_iYd2Si1kan9cFiNibYqBeJmEhIAX2L21zSPfNgbISAoJqz67scH2uyRMCqfLGyIkpFm_hFMCEBGpR3ny067-n-ZIluJK3UjdiYzSMYwo8WinAK7M8m2kUDzl9OwgjozDdadqg6HTry1v4pI71e9jdM4PJRFLd5bvzrfaRmJrrAgG2bSyb94LC0RFrT2lzUpHecnglFbbHQAOqaoB4xaQMeimYZHJiaZgOszncs9nMdtmhJDLlSccNrgSG0lV5bEljY7Cf9c0Sqpb8kvkgkX30ZFHP3t8ugbudIXvso7XJ5P1tDAqRBM_wMep5qlhjJtgUhpjP05x4FXAXpg89_SG3ZJ0kFsW5zRNxMPVodm00)
- **Feito com [PlantUML](https://plantuml.com/)**

### ğŸ›ï¸ Arquitetura do Sistema em Camadas

O sistema segue arquitetura **MVC (Model-View-Controller)** adaptada:

- **Model** (`core`): LÃ³gica de negÃ³cio (Hidrometro, ContadorAgua, Entrada)
- **View** (`ui`): Interfaces visuais (JanelaHidrometro, Display)
- **Controller** (`Main`): CoordenaÃ§Ã£o entre camadas
- **Config** (`config`): ConfiguraÃ§Ãµes e parametrizaÃ§Ã£o

### ğŸ“¦ Estrutura de Pacotes

- **`org.example`** - Classe principal e ponto de entrada
- **`org.example.config`** - Sistema de configuraÃ§Ãµes externa
- **`org.example.core`** - NÃºcleo da simulaÃ§Ã£o do hidrÃ´metro
- **`org.example.ui`** - Interfaces de usuÃ¡rio (grÃ¡fica e console)

## ğŸš€ Como Usar

### PrÃ©-requisitos

- **Java 21** instalado
- **Git** para clonar o repositÃ³rio
- **Gradle** (ou use o Gradle wrapper incluÃ­do)
- **IntelliJ IDEA** (recomendado) ou outra IDE Java

### 1. Clonando o RepositÃ³rio

```bash
# Clone o repositÃ³rio
git clone https://github.com/tacitojuno/Simulador-Hidrometro-Analogico

# Entre no diretÃ³rio
cd Hidrometro_PP
```

### 2. ConfiguraÃ§Ã£o no IntelliJ IDEA

```bash
# Abra o IntelliJ IDEA
# File â†’ Open â†’ Selecione a pasta do projeto
# Aguarde a indexaÃ§Ã£o automÃ¡tica do projeto
# Configure Java 21: File â†’ Project Structure â†’ Project SDK
```

### 3. Executando o Projeto

#### Via Gradle Wrapper (Recomendado):
```bash
# Linux/Mac
./gradlew run

# Windows
gradlew.bat run

# Executar com logs detalhados
./gradlew run --info

# Limpar e executar
./gradlew clean run

# Compilar sem executar
./gradlew build

# Executar testes (se configurados)
./gradlew test

# Gerar JAR
./gradlew jar

# Executar JAR gerado
java -jar build/libs/Hidrometro_PP.jar
```

#### Via IntelliJ IDEA:
1. Abra `src/main/java/org/example/Main.java`
2. Clique em **Run** ou pressione `Ctrl+Shift+F10`

#### Via Terminal (Java direto):
```bash
# Compile o projeto
javac -cp src/main/java src/main/java/org/example/Main.java

# Execute
java -cp src/main/java org.example.Main
```

### 4. Estrutura de Arquivos NecessÃ¡ria

```
simulador-hidrometro/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ org/example/                    # Pacote raiz
â”‚       â”‚       â”œâ”€â”€ Main.java                   # â† Ponto de entrada
â”‚       â”‚       â”œâ”€â”€ config/                     # ConfiguraÃ§Ãµes
â”‚       â”‚       â”‚   â””â”€â”€ Configuracao.java      # â† Gerenciamento de parÃ¢metros
â”‚       â”‚       â”œâ”€â”€ core/                       # LÃ³gica principal
â”‚       â”‚       â”‚   â”œâ”€â”€ Hidrometro.java        # â† Controlador principal
â”‚       â”‚       â”‚   â”œâ”€â”€ ContadorAgua.java      # â† Mecanismo de contagem
â”‚       â”‚       â”‚   â””â”€â”€ Entrada.java           # â† Controle de entrada
â”‚       â”‚       â””â”€â”€ ui/                         # Interfaces
â”‚       â”‚           â”œâ”€â”€ JanelaHidrometro.java  # â† Interface grÃ¡fica
â”‚       â”‚           â””â”€â”€ Display.java           # â† Console (debug)
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ BaseHidrometro/                 # Recursos grÃ¡ficos
â”‚               â””â”€â”€ imagem_fundo.png            # â† Imagem do hidrÃ´metro
â”œâ”€â”€ data/                                       # Dados de configuraÃ§Ã£o
â”‚   â””â”€â”€ parametros.txt                          # â† ConfiguraÃ§Ãµes do sistema
â”œâ”€â”€ docs/                                       # Dados de configuraÃ§Ã£o
â”‚   â””â”€â”€ (Diagrama UML) Simulador de HidrÃ´metro AnalÃ³gico V2.pdf
â”œâ”€â”€ MEDICOES/                                   # Imagens geradas automaticamente
â”‚   â”œâ”€â”€ 00.jpeg                                 # â† Capturas 01-99 por mÂ³
â”‚   â”œâ”€â”€ 01.jpeg
â”‚   â””â”€â”€ ...
â”œâ”€â”€ build/                                      # Arquivos gerados (Gradle)
â”‚   â”œâ”€â”€ classes/                                # Classes compiladas
â”‚   â””â”€â”€ libs/                                   # JARs gerados
â”œâ”€â”€ gradle/                                     # Wrapper do Gradle
â”‚   â””â”€â”€ wrapper/
â”‚       â”œâ”€â”€ gradle-wrapper.jar
â”‚       â””â”€â”€ gradle-wrapper.properties
â”œâ”€â”€ gradlew                                     # Script Gradle (Linux/Mac)
â”œâ”€â”€ gradlew.bat                                 # Script Gradle (Windows)
â”œâ”€â”€ build.gradle                                # ConfiguraÃ§Ã£o do Gradle
â”œâ”€â”€ settings.gradle                             # ConfiguraÃ§Ãµes do projeto
â””â”€â”€ README.md                                   # â† Este arquivo
```

## âš™ï¸ ConfiguraÃ§Ã£o

### Arquivo `data/parametros.txt`

```properties
# ConfiguraÃ§Ãµes do HidrÃ´metro

# PressÃ£o (bar)
pressao=2.5

# VazÃ£o (mÂ³/s)
vazao.agua=0.000833         # 50 L/min
vazao.maxima=0.00167        # 100 L/min
vazao.minima=0.0

# DetecÃ§Ã£o de Ar (%)
limite.ar=10.0
estimativa.ar.maxima=20.0
limite.deteccao.ar=0.00133  # 80 L/min

# SimulaÃ§Ã£o de Falta de Ãgua
probabilidade.falta.agua=0.01           # 1% de chance por segundo
duracao.minima.falta.agua=5000          # 5 segundos
duracao.maxima.falta.agua=7000          # 7 segundos

# Interface
intervalo.atualizacao=1000            # 1 segundo
gerar.capturas=true                   # Habilitar/Desabilitar captura de imagens
intervalo.capturas=0.01               # 1 mÂ³ no contador |0001|00|
```

## ğŸ”— Principais Relacionamentos Explicados

### **1. Main â†’ Sistema**
```java
// Main cria e coordena todos os componentes principais
Hidrometro hidrometro = new Hidrometro();           // â† NÃºcleo
Configuracao configuracao = new Configuracao();     // â† ParÃ¢metros  
JanelaHidrometro janela = new JanelaHidrometro(hidrometro, configuracao); // â† Interface
```

### **2. Hidrometro â†” Componentes Internos**
```java
// Hidrometro CONTÃ‰M (composiÃ§Ã£o) outros objetos
private ContadorAgua contadorAgua;    // â† Contagem de volume
private Display display;              // â† Output console
private Entrada entrada;              // â† Controle de entrada
private Configuracao configuracao;   // â† Acesso a parÃ¢metros
```

### **3. JanelaHidrometro â†’ Hidrometro/Configuracao**
```java
// JanelaHidrometro OBSERVA (dependency) Hidrometro/Configuracao
double volume = hidrometro.getVolumeTotal();     // â† Consulta dados
double vazao = hidrometro.getVazaoAtual();       // â† Consulta dados
double pressao = hidrometro.getPressaoAtual();   // â† Consulta dados
double estimativaAr = hidrometro.getEstimativaAr(); // â† Consulta dados

timer = new Timer(configuracao.getIntervaloAtualizacao(), e -> atualizarInterface()); //AtualizaÃ§Ã£o da janela
// Timer atualiza interface baseado no estado do Hidrometro
```

### **4. Configuracao â†” Arquivo Externo**
```java
// Configuracao CARREGA (uses) arquivo externo
Properties props = new Properties();
props.load(new FileInputStream("data/parametros.txt")); // â† LÃª arquivo
// Todos os outros componentes DEPENDEM de Configuracao para parÃ¢metros
```

### **5. Passagem de Dados Entre Camadas**
```
[Entrada] â†’ [Hidrometro] â†’ [ContadorAgua] â†’ [UI]
   â†‘             â†“              â†“           â†‘
 Sensor       Processa      Acumula     Exibe
 Values       Threads       Volume      Status
```

## ğŸ–¼ï¸ Interface GrÃ¡fica

### Recursos da Interface:

- **Contador digital** com 6 dÃ­gitos
- **Ponteiros analÃ³gicos** para decimais
- **Status em tempo real**:
    - âœ… FUNCIONAMENTO NORMAL
    - ğŸš¨ FALTA DE ÃGUA
    - âš ï¸ ALERTA - AR NA TUBULAÃ‡ÃƒO
    - âš ï¸ ALERTA - VAZAMENTO
    - ğŸ”¶ PRESSÃƒO BAIXA
    - âš« SEM FLUXO

### Dados Exibidos:

- **Volume total** acumulado
- **PressÃ£o atual** (bar)
- **Estimativa de ar** (%)
- **HorÃ¡rio** atual
- **Status** do sistema

## ğŸ›ï¸ Controle de Regulagem Manual:
- **Slider de ajuste** para vazÃ£o de Ã¡gua em tempo real

## ğŸ”§ Funcionalidades

1. **Contagem de volume** baseada em vazÃ£o Ã— tempo
2. **DetecÃ§Ã£o automÃ¡tica** de ar na tubulaÃ§Ã£o
3. **SimulaÃ§Ã£o aleatÃ³ria** de falta d'Ã¡gua
4. **VariaÃ§Ã£o natural** de pressÃ£o e vazÃ£o
5. **Reset automÃ¡tico** quando atinge limite mÃ¡ximo
6. **GeraÃ§Ã£o de diretÃ³rio** que armazena capturas da janela do hidrÃ´metro a cada mÂ³

## ğŸ§ª Testando o Sistema

### CenÃ¡rios de Teste:

1. **Funcionamento normal** - Observe contagem regular
2. **Falta d'Ã¡gua** - Aguarde evento aleatÃ³rio
3. **DetecÃ§Ã£o de ar** - Durante/apÃ³s falta d'Ã¡gua
4. **Reset automÃ¡tico** - Deixe atingir 999.999 mÂ³
5. **ConfiguraÃ§Ã£o personalizada** - Modifique `parametros.txt`
6. **GeraÃ§Ã£o de imagens** - Verifique pasta `MEDICOES/`
7. **Ajuste manual** - Use slider para alterar vazÃ£o

## ğŸ› SoluÃ§Ã£o de Problemas

### Erros Comuns:

#### `Imagem nÃ£o encontrada`
```bash
# Verifique se existe o arquivo:
src/main/resources/BaseHidrometro/imagem_fundo.png

# Ou use uma imagem padrÃ£o (serÃ¡ gerada automaticamente)
```

#### `Arquivo de configuraÃ§Ã£o nÃ£o encontrado`
```bash
# O sistema criarÃ¡ automaticamente em:
data/parametros.txt

# Com valores padrÃ£o
```

#### `Erro de compilaÃ§Ã£o`
```bash
# Verifique se o Java 21 estÃ¡ instalado:
java -version

# Configure o SDK do projeto no IntelliJ:
# File â†’ Project Structure â†’ Project SDK

# Via Gradle:
./gradlew --version
```

#### `Problemas com Gradle`
```bash
# Limpar cache e rebuildar:
./gradlew clean build --refresh-dependencies

# Verificar wrapper:
./gradlew wrapper --gradle-version 8.5
```

#### `Controles de regulagem nÃ£o respondem`
````bash
# Verifique se:
1. A simulaÃ§Ã£o nÃ£o estÃ¡ pausada
2. Os valores estÃ£o dentro dos limites vÃ¡lidos estabelecidos no arquivo de parametros.txt
3. A interface foi inicializada corretamente
````

## ğŸ‘¥ Contribuindo

1. FaÃ§a um **fork** do projeto
2. Crie uma **branch** para sua feature: `git checkout -b feature/nova-funcionalidade`
3. **Commit** suas mudanÃ§as: `git commit -m 'Adiciona nova funcionalidade'`
4. **Push** para a branch: `git push origin feature/nova-funcionalidade`
5. Abra um **Pull Request**

## ğŸ“„ LicenÃ§a

Projeto desenvolvido para fins acadÃªmicos no **IFPB (InstituiÃ§Ã£o Federal de CiÃªncia e EducaÃ§Ã£o da ParaÃ­ba).**

---

**Desenvolvido com JAVAâ˜• para a disciplina PadrÃµes de Projetos - 2025.2 - IFPB**